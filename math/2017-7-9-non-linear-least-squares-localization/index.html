<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/personal-blog/styles.5cca891fa5f15bca612a.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.header-module--header--3A712{display:flex;position:fixed;width:100%;justify-content:center;background:hsla(0,0%,100%,.9);z-index:999}.header-module--header--3A712 ul li{display:inline-block;padding:5px 15px}.header-module--header--3A712 ul li a{text-decoration:none;text-transform:uppercase;letter-spacing:1px;font-size:.9em;color:#444}.header-module--header--3A712 ul li a:active{color:#888}.header-module--header--3A712 ul li a:hover{color:#000}.layout-module--content--3nIku{max-width:1100px;margin:0 auto;padding:150px 30px 50px}body,html{padding:0;margin:0;line-height:1.8em}body,input,textarea{font-family:Fira Sans,sans-serif;color:#222;-webkit-font-smoothing:antialiased}h1{font-size:1.8em;margin:0;padding:0;line-height:1.3em}h1,h2{font-weight:lighter;color:#444}h2{font-size:1.4em}h3{font-size:1.2em;font-weight:lighter;color:#444}time{color:#999}header{text-align:center;padding:0}img{max-width:70%}ol li+li{margin:20px 0 0}footer{color:#999;text-align:center;padding:20px 0;font-size:.8em}hr{border:0;border-top:1px solid #eee}a{text-decoration:none;color:#007eff}blockquote{display:block;background:#fff;padding:15px 20px 15px 45px;margin:0 0 20px;position:relative;font-family:Courier,monospace;font-size:16px;font-style:normal;line-height:1.4;color:#666;text-align:justify;border-left:15px solid #c76c0c;border-right:2px solid #c76c0c;box-shadow:2px 2px 15px #ccc}blockquote:before{content:"\201C";font-family:Georgia,serif;font-size:60px;font-weight:700;color:#999;position:absolute;left:10px;top:5px}blockquote:after{content:""}blockquote a{text-decoration:none;background:#eee;cursor:pointer;padding:0 3px;color:#c76c0c}blockquote a:hover{color:#666}blockquote em{font-style:italic}table{font-size:14px;border-collapse:collapse;padding:0;margin-left:auto;margin-right:auto}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0;padding:0}table th{background-color:#f8f8f8}table tr td[align=center],table tr th[align=center]{text-align:center}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}code{font-size:12px}.footnotes ol li{margin:0}.footnotes ol li p{display:inline-block;margin:0}.lyrics_template-module--author--3-7Ds{color:#999;font-style:italic}.blogpost_template-module--title--10Qf0{text-align:center}.postit-module--post--mten1{padding:20px 0}.postit-module--post--mten1 h2{margin:0;padding:0}.postit-module--post--mten1 h2 a{color:#444;text-decoration:none}.postit-module--post--mten1 h2 a:hover{color:#000}.postit-module--post--mten1 time{font-style:italic;font-size:.9em}.postit-module--category--GrpSU{text-align:center;padding:0 3px}.postit-module--category--GrpSU a{background:#eee;padding:3px 5px;font-size:.8em;border-radius:5px;color:#888;-webkit-transition:.2s ease-in-out;transition:.2s ease-in-out}.postit-module--category--GrpSU a:hover{color:#555;text-decoration:none}.postblock-module--postblock--1mhsV{display:flex;flex-wrap:wrap}.postblock-module--postblock--1mhsV a{text-decoration:none;-webkit-transition:all .3s ease;transition:all .3s ease}.postblock-module--postblock--1mhsV a:hover,.postblock-module--postblock--1mhsV a span{color:#000}</style><meta name="generator" content="Gatsby 2.18.17"/><title data-react-helmet="true">blog</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><link rel="icon" href="/personal-blog/icons/icon-48x48.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="manifest" href="/personal-blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/personal-blog/icons/icon-48x48.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="72x72" href="/personal-blog/icons/icon-72x72.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="96x96" href="/personal-blog/icons/icon-96x96.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="144x144" href="/personal-blog/icons/icon-144x144.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="192x192" href="/personal-blog/icons/icon-192x192.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="256x256" href="/personal-blog/icons/icon-256x256.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="384x384" href="/personal-blog/icons/icon-384x384.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="512x512" href="/personal-blog/icons/icon-512x512.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link as="script" rel="preload" href="/personal-blog/webpack-runtime-d3627ed8a3bf2791d2bf.js"/><link as="script" rel="preload" href="/personal-blog/app-5e64fbbb79d4da648cf3.js"/><link as="script" rel="preload" href="/personal-blog/styles-0885620429de5bba7973.js"/><link as="script" rel="preload" href="/personal-blog/commons-b430ada085f4e94254c9.js"/><link as="script" rel="preload" href="/personal-blog/component---src-templates-blogpost-template-jsx-cd561ccf5791150a167d.js"/><link as="fetch" rel="preload" href="/personal-blog/page-data/math/2017-7-9-non-linear-least-squares-localization/page-data.json" crossorigin="anonymous"/><script type="text/javascript" src="/personal-blog/js/jquery/jquery-1.8.3.min.js"></script><link rel="stylesheet" type="text/css" href="/personal-blog/js/bigfoot/bigfoot-bottom.css"/><script type="text/javascript" src="/personal-blog/js/bigfoot/bigfoot.min.js"></script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><header class="header-module--header--3A712"><ul><li><a href="/personal-blog/">Home</a></li><li><a href="/personal-blog/music/">Music</a></li><li><a href="/personal-blog/math_engineering/">Math &amp; Engineering</a></li><li><a href="/personal-blog/philosophy/">Philosophy</a></li><li><a href="/personal-blog/projects/">Projects</a></li><li><a href="/personal-blog/about/">About</a></li></ul></header><div class="layout-module--content--3nIku"><div><h1 class="blogpost_template-module--title--10Qf0">Non Linear Least Squares Localization</h1><footer>Posted on <!-- -->July 9th 2017</footer><div><h1>Non Linear Least Squares</h1>
<p>Our model consist of <em>i</em> anchors and 1 beacon<br>
\( x \) is the unknown beacon position<br>
\( u \) is the known positions of each <em>ith</em> anchor<br>
\( y \) is the given measurement of the distance between each <em>ith</em> anchor to the beacon   </p>
<p>Model,</p>
<html>
\[
\begin{align}
y_i \approx \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2}
\end{align}
\]
</html>
<p><em>ith</em> Residual,</p>
<html>
\[
\begin{align}
f_i(x) = \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} - y_i, \quad i=0,1,2
\end{align}
\]
</html>
<p>Jacobian,</p>
<html>
\[
\begin{split}\begin{align}
&J_{i0} = \frac{\partial f_i}{\partial x_0} = \frac{x_0 - u_{i0}}{ \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} } \\
&J_{i1} = \frac{\partial f_i}{\partial x_1} = \frac{x_1 - u_{i1}}{ \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} } 
\end{align}\end{split}
\]
</html>
<p>Python code,</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>optimize <span class="token keyword">import</span> least_squares
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>patches <span class="token keyword">as</span> patches

<span class="token keyword">def</span> <span class="token function">model</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">0.5</span>

<span class="token keyword">def</span> <span class="token function">residual</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> model<span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">-</span> y

<span class="token keyword">def</span> <span class="token function">jacobian</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    J <span class="token operator">=</span> np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    den <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">0.5</span>
    J<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> den
    J<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> den
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>nan_to_num<span class="token punctuation">(</span>J<span class="token punctuation">)</span></code></pre></div>
<hr>
<h1>Weighted Non Linear Least Squares</h1>
<p>Model</p>
<html>
\begin{align}
y_i \approx \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2}
\end{align}
</html>
<p>Weight,</p>
<html>
\begin{align}
w_i = {\sigma}^2y_i
\end{align}
</html>
<p><em>ith</em> Residual,</p>
<html>
\begin{align}
f_i(x) = w_i\sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} - w_iy_i, \quad i=0,1,2
\end{align}
</html>
<p>Jacobian,</p>
<html>
\begin{split}\begin{align}
&J_{i0} = \frac{\partial f_i}{\partial x_0} = \frac{w_i(x_0 - u_{i0})}{ \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} } \\
&J_{i1} = \frac{\partial f_i}{\partial x_1} = \frac{w_i(x_1 - u_{i1})}{ \sqrt{(x_0 - u_{i0})^2 + (x_1 - u_{i1})^2} } 
\end{align}\end{split}
</html>
<p>Python code,</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">model_w</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">0.5</span>

<span class="token keyword">def</span> <span class="token function">weight</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token operator">**</span><span class="token number">2</span>

<span class="token keyword">def</span> <span class="token function">residual_w</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    w <span class="token operator">=</span> weight<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword">return</span> w <span class="token operator">*</span> model<span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">-</span> w <span class="token operator">*</span> y

<span class="token keyword">def</span> <span class="token function">jacobian_w</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    w <span class="token operator">=</span> weight<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    J <span class="token operator">=</span> np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span>
    den <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">0.5</span>
    J<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">*</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> den
    J<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> w <span class="token operator">*</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> den
    <span class="token keyword">return</span> np<span class="token punctuation">.</span>nan_to_num<span class="token punctuation">(</span>J<span class="token punctuation">)</span></code></pre></div>
<p>This is a more advanced way of selecting weights (see <a href="/personal-blog/personal-blog/assets/non-linear-least-squares-localization/weighted_least_squares.pdf">choosing-weights</a>)</p>
<html>
\begin{align}
p_i = \frac{n}{\sigma_g^2 + d^2\sigma_m^2}
\end{align}
</html>
<p>where,</p>
<ul>
<li>n is the number of observations</li>
<li>d is the distance</li>
<li>\( \sigma_m \) is the standard deviation of the measuring device</li>
<li>\( \sigma_g \) is the standard deviation of the measuring device and of centering the device</li>
</ul>
<hr>
<h1>Test Data</h1>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">u <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x0 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

result   <span class="token operator">=</span> least_squares<span class="token punctuation">(</span>residual<span class="token punctuation">,</span> x0<span class="token punctuation">,</span> jac<span class="token operator">=</span>jacobian<span class="token punctuation">,</span> bounds<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
result_w <span class="token operator">=</span> least_squares<span class="token punctuation">(</span>residual_w<span class="token punctuation">,</span> x0<span class="token punctuation">,</span> jac<span class="token operator">=</span>jacobian_w<span class="token punctuation">,</span> bounds<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">%</span>matplotlib inline
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'anchors'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>result<span class="token punctuation">.</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'prediction'</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>result_w<span class="token punctuation">.</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> result_w<span class="token punctuation">.</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'prediction w.'</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'x0'</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_patch<span class="token punctuation">(</span>
        plt<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span><span class="token builtin">tuple</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> fc<span class="token operator">=</span><span class="token string">'none'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'scaled'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">"upper left"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p><img src="/personal-blog/assets/non-linear-least-squares-localization/output_7_0.png" alt="png"></p></div><footer>Posted on <!-- -->July 9th 2017</footer></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/math/2017-7-9-non-linear-least-squares-localization/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5e64fbbb79d4da648cf3.js"],"component---src-templates-lyrics-template-jsx":["/component---src-templates-lyrics-template-jsx-00c75cad6a67a0386b3e.js"],"component---src-templates-blogpost-template-jsx":["/component---src-templates-blogpost-template-jsx-cd561ccf5791150a167d.js"],"component---src-pages-about-jsx":["/component---src-pages-about-jsx-ea1f4646e1533ef1bea0.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-21d42dc3a9759bce9db2.js"],"component---src-pages-math-engineering-jsx":["/component---src-pages-math-engineering-jsx-3d33344d7b495ce0f699.js"],"component---src-pages-music-jsx":["/component---src-pages-music-jsx-b2c8ea5cab58edd5f76a.js"],"component---src-pages-philosophy-jsx":["/component---src-pages-philosophy-jsx-1ade4c4418c13ac719e2.js"],"component---src-pages-projects-jsx":["/component---src-pages-projects-jsx-601e2efe0d4393d777e6.js"]};/*]]>*/</script><script src="/personal-blog/component---src-templates-blogpost-template-jsx-cd561ccf5791150a167d.js" async=""></script><script src="/personal-blog/commons-b430ada085f4e94254c9.js" async=""></script><script src="/personal-blog/styles-0885620429de5bba7973.js" async=""></script><script src="/personal-blog/app-5e64fbbb79d4da648cf3.js" async=""></script><script src="/personal-blog/webpack-runtime-d3627ed8a3bf2791d2bf.js" async=""></script><script type="text/javascript" src="/personal-blog/js/reftagger/reftagger.js"></script><script src="//biblia.com/api/logos.biblia.js"></script><script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script></body></html>