{"componentChunkName":"component---src-templates-blogpost-template-jsx","path":"/engineering/2015-11-1-ssh-basics/","result":{"data":{"markdownRemark":{"html":"<h1>Definitions</h1>\n<p>remote </p>\n<ul>\n<li>something elsewhere (eg. a remote server you want to access)</li>\n</ul>\n<p>local</p>\n<ul>\n<li>where you are working from (eg. a desktop)</li>\n</ul>\n<h1>Problem</h1>\n<ol>\n<li>You want to access your <strong>remote server</strong> from your <strong>local machine</strong> while keeping others out.</li>\n<li>You want to <strong>encrypt</strong> the communication to and from your server.</li>\n<li>You don't want to keep typing in your password.</li>\n</ol>\n<h1>Solution</h1>\n<p>SSH works by generating a pair of keys. </p>\n<ul>\n<li>A <em>private</em> key, which identifies <strong>you</strong></li>\n<li>A <em>public</em> key which you store on the remote server you want to connect to.</li>\n</ul>\n<p>The magic here is that, you <strong>cannot generate the private key from the public key</strong>, however, <strong>ONLY</strong> the private key can unlock the public key.</p>\n<p>This means that you can pass your <strong>public key</strong> around freely, without worrying that anyone can unlock it, because only you have the correct <strong>private key</strong> to unlock it.</p>\n<h1>Setting up</h1>\n<p>On your local machine, generate a pair of keys, a private key that identifies you, and a public key that you can pass around (to the server that you want to access).</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ssh-keygen -t rsa</code></pre></div>\n<p>At this point, it would prompt you for a <strong>passphrase</strong>. This is an <strong>additional layer of security</strong> which is <strong>optional</strong>, if you choose not to use it just leave it empty. Setting a passphrase will configure your keys such that you would have to enter a passphrase to use it. In the event that someone steals your <strong>private key</strong>, he would have access to all your servers. Adding this additional layer means that he would not only need your private key, but your passphrase as well.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># on your local machine</span>\n~/\n  .ssh/\n    id_rsa      <span class=\"token comment\"># your private key, don't give this out!</span>\n    id_rsa.pub  <span class=\"token comment\"># public key for handing out to remote server</span></code></pre></div>\n<p>Now, access your remote server and create the <em>~/.ssh directory</em> if it does not already exist. Copy the contents inside <em>ida_rsa.pub</em> into the file <em>~/.ssh/authorized_keys</em> (make it if it does not exist). </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># on your remove server</span>\n~/\n  .ssh/\n    authorized_keys</code></pre></div>\n<p>the <strong>authorized_keys</strong> file would contain more than one public keys depending on how many users negotiate access to it.</p>\n<p>Now, when you SSH into your server, your would not need a password and the channel would be secure</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ssh</span> user@172.164.120.133</code></pre></div>\n<h1>Permission keys</h1>\n<p>There can be another case in which the server generates and stores the <strong>public key</strong>, and then gives you the <strong>private key</strong>. This is typical when you sign up for a AWS server with Amazon. in this case, you should not use the id_rsa key that you generated yourself, but the private key that was given to you. To SSH using a custom private key:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">shh -i ./path/to/private/key.pem user@172.164.120.133</code></pre></div>","frontmatter":{"title":"SSH Basics"},"fields":{"date":1446307200}}},"pageContext":{}}}